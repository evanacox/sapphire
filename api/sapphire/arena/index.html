<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A simple typed arena module."><title>sapphire::arena - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-cb6f1f67f1bcd037.css" id="mainThemeStyle"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="sapphire" data-themes="" data-resource-suffix="" data-rustdoc-version="1.73.0-nightly (474709a9a 2023-08-03)" data-channel="nightly" data-search-js="search-6dfdfced5eff6596.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-6d2c9675f3d09c26.css" data-theme-dark-css="dark-45ceb8f2e522f4d1.css" data-theme-ayu-css="ayu-fd19013d6ce078bf.css" ><script src="../../static.files/storage-db41da1a38ea3cb8.js"></script><script defer src="../../static.files/main-0795b7d26be81095.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-6d2c9675f3d09c26.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-45ceb8f2e522f4d1.css"><link rel="stylesheet" href="../../static.files/noscript-cffde32267a19fd6.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.6.0/katex.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.6.0/katex.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.6.0/contrib/auto-render.min.js"></script>
</head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../sapphire/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../sapphire/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module arena</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">sapphire</a>::<wbr><a class="mod" href="#">arena</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/sapphire/arena/mod.rs.html#11-73">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A simple typed arena module.</p>
<p>These arenas mostly do not allow deletion (besides <a href="struct.SecondaryMap.html" title="struct sapphire::arena::SecondaryMap"><code>SecondaryMap</code></a>) and
provide configurable index sizes for extra flexibility and performance.
It is used extensively for forming graphs and other complex data structures
needed inside the compiler for representing different IRs.</p>
<p>Very similar to <code>id_arena</code> and other simple typed arena crates, except this
one ties in better with the specific needs of this compiler (and does
less safety checks in exchange for significantly reduced overhead per slot).</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="macro">arena_key! </span>{
    <span class="kw">pub struct </span>Node;
}

<span class="kw">enum </span>AstNode {
    Immediate(u64),
    Add(Node, Node),
    Mul(Node, Node)
}

<span class="kw">let </span><span class="kw-2">mut </span>arena = ArenaMap::new();

<span class="comment">// (16 + 3) * 3
</span><span class="kw">let </span>e1: Node = arena.insert(AstNode::Immediate(<span class="number">16</span>)); <span class="comment">// =&gt; 16
</span><span class="kw">let </span>e2 = arena.insert(AstNode::Immediate(<span class="number">3</span>)); <span class="comment">// =&gt; 3
</span><span class="kw">let </span>e3 = arena.insert(AstNode::Add(e1, e2)); <span class="comment">// =&gt; (16 + 3)
</span><span class="kw">let </span>e4 = arena.insert(AstNode::Mul(e2, e3)); <span class="comment">// =&gt; (16 + 3) * 3</span></code></pre></div>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.ArenaMap.html" title="struct sapphire::arena::ArenaMap">ArenaMap</a></div><div class="desc docblock-short">This is meant to act as a primary mapping of <code>K -&gt; V</code>, where <code>K</code> is some key
type and <code>V</code> is the value being stored. Other mappings that use the same
key as an existing <a href="struct.ArenaMap.html" title="struct sapphire::arena::ArenaMap"><code>ArenaMap</code></a> should use <a href="struct.SecondaryMap.html" title="struct sapphire::arena::SecondaryMap"><code>SecondaryMap</code></a> instead.</div></li><li><div class="item-name"><a class="struct" href="struct.IntoIter.html" title="struct sapphire::arena::IntoIter">IntoIter</a></div><div class="desc docblock-short">Helper type for <code>.into_iter()</code> for arena map types</div></li><li><div class="item-name"><a class="struct" href="struct.Keys.html" title="struct sapphire::arena::Keys">Keys</a></div><div class="desc docblock-short">Provides a way of iterating over all of the keys in a given <a href="struct.ArenaMap.html" title="struct sapphire::arena::ArenaMap"><code>ArenaMap</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.SecondaryMap.html" title="struct sapphire::arena::SecondaryMap">SecondaryMap</a></div><div class="desc docblock-short">Intended to be a dense secondary mapping <code>K -&gt; V</code> for keys from a primary <a href="struct.ArenaMap.html" title="struct sapphire::arena::ArenaMap"><code>ArenaMap</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.SecondarySet.html" title="struct sapphire::arena::SecondarySet">SecondarySet</a></div><div class="desc docblock-short">Intended to be a dense representation for a set of keys from a primary map.</div></li><li><div class="item-name"><a class="struct" href="struct.UniqueArenaMap.html" title="struct sapphire::arena::UniqueArenaMap">UniqueArenaMap</a></div><div class="desc docblock-short">Contains a table of immutable, unique elements. All elements are only
stored once, no duplicates are stored inside of the arena itself. Lookups
by key are almost as efficient as they are in a plain <a href="struct.ArenaMap.html" title="struct sapphire::arena::ArenaMap"><code>ArenaMap</code></a>, although
an extra pointer dereference must be done.</div></li></ul><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.ArenaKey.html" title="trait sapphire::arena::ArenaKey">ArenaKey</a></div><div class="desc docblock-short">Models a type that can act as a key for the arena map types.</div></li></ul></section></div></main><script>
renderMathInElement(document.body, {
    delimiters: [
        {left: "$$", right: "$$", display: true},
        {left: "\\[", right: "\\]", display: true},
        {left: "\\(", right: "\\)", display: false},
        {left: "$", right: "$", display: false}
    ]
});
</script>
</body></html>